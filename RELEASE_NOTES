
#==============================================================
#
#  Name: RELEASE_NOTES
#
#  Rem:  This files describes release notes for
#        the Bunch Charge Monitor IOC Application.
#
#  Auth: xx-Dec-2012, XXX         (xxx)
#  Rev:  dd-mmm-yyyy, Reviewer's Name    (USERNAME)
#--------------------------------------------------------------
R2.2.14		Carolina Bianchini (carolina)			-2/20/2019
				-Changed Temp and TempElc input to match Leonid's requests:
					Temp is now pointing to TEMP3:INPUT2 from TEMP1:INPUT1
					TempEls is now pointing to TEMP1:INPUT1 from TEMP3:INPUT2
	 				in file bcmApp/Db/bcm.substitutions
				-Automatically load the yaml file nstead of manually set Load from the EPICS interface
					dbpf to start loading fpga configuration at boot
					iocBoot/sioc-gunb-im01/st.cmd 
					iocBoot/sioc-gunb-fc01/st.cmd
				-Removed MsgDelay register initial settings from the default configuration file
					yaml/defaultsToro08-21-18.yaml
				-Upgraded YCPSWASYN to R3.0.1 from R3.0.0
				-Changed YCPSWASYNConfig call:
					from YCPSWASYNConfig("${CPSW_PORT}", "${YAML_FILE}", "", "${FPGA_IP}", "", 40, "${AUTO_GEN}", "${DICT_FILE}")
					to YCPSWASYNConfig("Atca7", "", "", "0", "yaml/bcm_01_20170313140632.dict")

R2.2.13 	Carolina Bianchini (carolina)			-10/29/2018
				- Upgrading the module version to latest in RELEASE_NOTES.
				- IOCADMIN from R3.1.15-1.0.0 to R3.1.15-1.1.0
					  needed for ioc Admin support
					 -bcm_DBD += iocAdmin.dbd
					 +#The db changed name when moved to version R3.1.15-1.1.0 
						from  bcm_DBD += iocAdmin.dbd
					 +bcm_DBD += devIocStats.dbd
					 MISCUTIL R2.2.4 to R2.2.5
					 YCPSWASYN R2.0.4 to R3.0.0
					 YAMLDOWNLOADER R1.0.1 

R2.2.12		Carolina Bianchini (carolina)			-10/24/2018
				- Changed st.cmd to load the msgStatus.db for b084 as well
				- Added cpswLoadConfigFile(getenv("yaml/defaultsToro08-21-18.yaml"), "mmio") 
					in iocBoot/sioc-**-im01/st.cmd
				- fixed the SCAN to 1 second from Passive for TmitCoefRBV in bcmApp/Db/bcm.sub

R2.2.11		Carolina Bianchini (carolina)			-10/23/2018
				- Adding /mmio/AppTop/AppCore/SysGen[0]/DspCoreConfig/TmitCoef to yaml/bcm dict file
				- in msgStatus.template adding a record TORO:$(AREA):$(LOCA):TmitCoef to readback teh Tmit value from
				  	BPMS BPMS:$(AREA):$(BPM_LOCA):CHRG_FWSCL and writing it into the AMC0/1:TmitCoef register.
					Pv added into msgStatus.db $(carrier_prefix):BPM_Tmit
				- in bcm.subst added RBV and PV such as:
					{ $(P),     TmitCoefRBV,  "Coef Tmit readback value from BPMS",  "NO",  "Passive",   $(PORT),     "",     AMC$(AMC):TmitCoef }
				- Adding macro to load msgStatus in iocBoot/sioc-gunb-im01/st.cmd
				- File with list of triggers setpoints for IM01 in bcmApp/srcEng/RESTORE_TRIGGERS_IM01

R2.2.10		Carolina Bianchini (carolina) 			-10/22/2018
				- Adding bcmApp/srcEng folder to BCM app for FW Eng to have scripts available in PROD.
				- Adding MSG DELAY for MPS / BPMS communication
				- Changed macros P to point to carrier_prefix=AMC_CARRIER_PREFIX for dbLoadRecords msgStatus
				- Added Make file for srcEng: bcmApp/srcEng/Makefile
				- Modified srcDisplay/Makefile commenting out the EDM+= 
				- Updated the CALC record calculation to A&B?1:0 for bcmApp/Db/msgStatus.db

R2.2.9		Carolina Bianchini (carolina)			-10/10/2018	
				- Adding DB+= msgStatus.db in bcmApp/Db/Makefile
				- Adding the comma after PINI where missing in carrier.substituitions
				- Moving AppType, SelBpm, ThreshTmit, CalibEnable from RegisterIn to 
					RegisterOut template and adding them to RegisterOutRBV as well.
				- Changed macros for dbLoadRecords of swap.db
				- Changed SCAN to 1sec from PASSIVE for BPMS Ip and Port PV in carrier.substituitions
				- Removed the following templates from the app. The templates are now loaded by Makefile.
					RegisterArrayIn.template RegisterArrayOut.template RegisterIn.template RegisterOut.template 
					RegisterOutRBV.template RegisterArrayChar.template RegisterEnumBIn.template 
					RegisterEnumBOut.template RegisterEnumBOutRBV.template RegisterEnumMBBIn.template 
					RegisterEnumMBBOut.template RegisterEnumMBBOutRBV.template RegisterDoubleIn.template 
					RegisterDoubleOut.template RegisterDoubleOutRBV.template RegisterCommand.template 
					RegisterStream.template RegisterStream16.template
				- Added macro PORT=trig to dbLoadRecords for all SIOCs' st.cmd
				- In msgStatus.db fixed typos in Record FLINK to FLNK and 2 seconds to 1second
				- modified yaml/defaultsFC05-21-18_test.yaml to remove the mps configuration section as 
					Jesus does it dorectly from MPS system. yaml/defaultsFC05-21-18_test.yaml
				- Added TORO configuration files in yaml/ for normal operation and to test mps
					yaml/defaultsToro08-21-18.yaml yaml/defaultsToro08-21-18_mps.yaml
				- Changed the dbLoadrecords macro to LOAD_FILE=yaml/defaultsToro08-21-18.yaml 
					iocBoot/sioc-gunb-im01/st.cmd iocBoot/sioc-b084-im01/st.cmd
				- In TORO st.cmd: Added Crossbar Control Driver call. And moved getBergoz script after bcm.dbd load
				- Moved BERGOZ0_TTY set EPICS environment in the st.cmds after getBergoz.sh script for:
				 	iocBoot/sioc-b084-im01/st.cmd 
					iocBoot/sioc-gunb-im01/st.cmd
				- in st.cmd for sioc-gunb-im01:
					Adding macro DESC for dbLoadRecords(db/msgStatus.db,carrier_prefix=${AMC1_PREFIX},
						DESC=Communications Diagnostics)
				 	-epicsEnvSet("TEMP_IOC_NAME","SIOC:$(AREA):IM01")
					+epicsEnvSet("TEMP_IOC_NAME","$(AMC1_PREFIX)")
				- in bcmApp/Db/TempMonitoring_TORO.substitutions changed P from $(DEVICE):BCM_EL3202_2:INPUT2:VALUE 
					to $(DEVICE):TEMP1:INPUT1:VALUE 
			
R2.2.8		Carolina Bianchini (carolina)			- 10/10/2018
				- clean up all st.cmd 

R2.2.7		Carolina Bianchini (carolina)
				-updating tprTrigger module to R1.2.4
				-removing HIHI LOLO from RegisterIn.template when not in autosave or alarmed.
				-bcmApp/Db/registerIn.template changing the ADDR to 1 from 0 for line:
				 field(INP,  "@asyn($(PORT),1)$(PARAM)")
				-Adding a new databaase to handle message status readback over the back pane, msgStatus.db
				-Adding to st.cmd line: dbLoadRecords("db/msgStatus.db","carrier_prefix=${AMC0_PREFIX}")

R2.2.6		Carolina Bianchini (carolina)			- 8/14/2018
				-adding macro PORT for tprTrig.db

R2.2.5		Dan Sciortino					- 8/14/2018
				- Fixed RegisterIn.template generation
				- Added makefile target IOCRELEASE
				- Fixed formatting in substitutions file

R2.2.4		Carolina Bianchini (carolina) 			- 8/13/2018
				-Updating the dictionary file for TimingProc 
				 to include only the following timing related signals: 
				 SelectSource, SoftTrig, outPolarity, trigDelay, trigStretch. 
				-Adding tpr Trigger driver setup to startup script.
				-Adding tprTrigger dbd and LIB
				-Updating tprTrigger release to R1.2.2
				
R2.2.3		Dan Sciortino					- 8/09/2018
				- Restore missing MPS module
				
R2.2.2		Dan Sciortino					- 8/09/2018
				- Fixed typo in dbLoadRecords tprTrg.db -> tprTrig.db
				- Fixed Db/Makefile for correct tprTrig.db

R2.2.1		Dan Sciortino					- 8/09/2018
				- Fixed typo in dbLoadRecords tprTrig.db -> tprTrg.db

R2.2.0		Dan Sciortino					- 8/09/2018
				- Updated tprTriggers 1.2.0 -> 1.2.1
				- CrossbarControl  1.0.3 -> 1.05
				- Updated st.cmds for pv generation
					sioc-gunb-fc01/st.cmd
					sioc-b084-im01/st.cmd
					sioc-b084-fc01/st.cmd

R2.1.2		Dan Sciortino					- 8/08/2018
				- Uncommented dbpf to make pvs tty_rd, serialnum_expect
				- fixed pv name generation for tprDeviceNamePV

R2.1.1		Dan Sciortino					- 8/08/2018
				- Added triggers dbLoadRecords for
					sioc-gunb-fc01/st.cmd
					sioc-b084-im01/st.cmd
					sioc-b084-fc01/st.cmd
				- Cleaned up formatting for RELEASE_NOTES

R2.1.0      Carolina Bianchini      		- 8/07/2018
				- Upgraded tprTriggers to release R1.2.0 
				- added tprTrig.db and tprDeviceNamePV.db 
	              to Db/Makefile
				- added dbLoadRecords of teh triggers 
	              PVs for the 15 Channels

R2.0.24		Dan Sciortino					- 8/06/2018
				- fixed Calc record inpb duplication

R2.0.23		Dan Sciortino					- 8/06/2018
				- Removed extra /etc/*.xml files
				- Added scan field for ethercat PVs

R2.0.22		Dan Sciortino					- 8/06/2018
				- Updated calc record for ethercat PVs

R2.0.21		Dan Sciortino					- 8/03/2018
				-Fixed Passing macro for ethercat PVs

R2.0.20		Dan Sciortino					- 8/03/2018
				- Fixed Passing macro for ethercat PVs

R2.0.19		Dan Sciortino					- 8/03/2018
				- Fixed script setting enviroment variable
				- fixed macro for ethercat generation

R2.0.18		Dan Sciortino					- 8/03/2018
				- Add calc pv records for ethercat
				- updated st.cmd for setting enviroment variables
				  bergoz serial number
				- updated getBergozLocation

R2.0.17		Dan Sciortino					- 8/01/2018
			 	-fixed ethercat tempurature pv generation

R2.0.16		Dan Sciortino					- 8/01/2018
			 	- Updated st.cmd for bergoz location, ethercat PV 
			 	  name generation
			 	- updated getBergozLocation.sh

R2.0.15		J. Vasquez              		- 7/31/2018
	            - Integrate the LCLS-II MPS module.

R2.0.14		Dan Sciortino					- 7/30/2018
			 	- added getBergozLocation to IM01
			 	- modified st.cmd to call

R2.0.13 	Carolina Bianchini (carolina) 	- 7/25/2018		
			 	- updated unit PV number to match the Z location 360
			 	- Temperature is now working, corrected the templates' macros.

R2.0.12		Dan Sciortino (disco)			- 7/24/2018
			 	- Added etc/ 
			 	- updated main MakeFile to call etc/makefile
			 	- added ethercat templates, driver calls for ethercat 
			  	  into st.cmd for gunb SIOCs

R2.0.11		C. Bianchini (carolina)  		- 7/24/2018
			 	- Fixed macro in st.cmd for sioc-gunb-im01 AMC0->AMC1
			 	- Fixed the .dict file to match FPGA functionalities:
				- removed: SelectSource, trigDelay, TrigStretch, 
				  outPolarity, softTrig
				- added: RxCountReset, MsgDelay

R2.0.10 	Dan Sciortino					- 7/23/2018----------
		 		- Fixed naming of PVs in st.cmd 				|
				- Added bergozExpert display in 				|
		 		  bcmApp/srcDisplay								|  Do
		 														|  Not
R2.0.9		Dan Sciortino					- 7/20/2018			|  Use
		 		- Cleaned up extra PVs from substitions 		|
		  	  	  and dict file 								|
		 		- Added mapping to PVs in dict file 			|
		 		- Updated Bergoz location in st.cmds-------------

R2.0.8		Dan Sciortino					- 7/18/2018
			 	- Updated Keitley port and address

R2.0.7		Dan Sciortino					- 7/18/2018
			 	- Updated keithley port number

R2.0.6		Dan Sciortino					- 7/16/2018
			 	- Upadted picometer address
			 	- Updated RATE record generation:

R2.0.5		Dan Sciortino 					- 7/16/2018
			  	- Updated substitutions file for record generation
			  	- Updated record for alarm configuration

R2.0.4		Dan Sciortino					- 7/12/2018
			  	- Updated yaml files in AmcCarrierBcm_project.yaml

R2.0.3		Dan Sciortino					- 7/11/2018
			  	- updated bin path in st.cmds

R2.0.2		Dan Sciortino					- 7/11/2018
			  	- Application was cramable but in the wrong location
			  	- Application meant to be SIOC not HLA

R2.0.1		Dan Sciortino					- 7/11/2018
			  	- Made application cramable

R2.0.0		Dan Sciortino					- 7/9/2018
			  	- Updated tagged version to 2.0.0

R1.2.6		Dan Sciortino					- 7/9/2018
			  	- CONFIG_SITE cpsw was set for 3.6.3
				  BSA was set for 1.1.0 in
			  	  iocTop/BunchChargeMonitor/current
			  	- removed MEASURE from substition file
				  this is meant for the keithley applications

R1.2.5		Dan Sciortino					- 7/2/2018
			  	- fixed missing HHSV and LLSV values

R1.2.4		Dan Sciortino					- 7/2/2018
			  	- Updated Keithley6482 to 0.0.5

R1.2.3		Dan Sciortino					- 6/29/2018
			  	- Added HIHI and LOLO for Charge and trigger limits

R1.2.2		Dan Sciortino     				- 5/24/2018
		      	- Updated the st.cmd for all SIOCs to use latest configuration
				  files.

R1.2.1	    Dan Sciortino					- 5/22/2018
		      	- Updated the yaml files and the configuration file to add
		       	  Timing distributed Triggering features

R1.2		Dan Sciortino					- 05/17/2018
		      	- Updated configure/release and CONFIG_SITE for TPR integration
		      	- Modified st.cmd with env_variables
		      	- Updated src/Makefile with TPR libs and IOC Admin
		      	- Updated Db/Makefile for tpr and crossbar

R1.1.3      Carolina Bianchini 				- 02/27/2018
		      	- updating yaml according to Leonid latest release

R1.1.2      Carolina Bianchini 				- 02/12/2018
		      	- Adding autosave to PicoAmmeter scan from the latest module release R0.0.3.
		      	- Updated the Yaml files. Updated st.cmd for consistencies, typos and new dbs.
		      	- Fix Port and IP Address reverse order.
	            - Added new CmnConfig registers to throubleshoot MPS issues

R1.1.1      Carolina Bianchini 				- 02/05/2018
		      	- updated BSA API to R1.0.3 and BSA module to R1.4.0 .
		     	- updated all SIOCs st.cmd files to do not specify max number of data points for bsa
		          and to specfy type of data when called Addbsa function.

R1.0.4      Carolina Bianchini 				- 01/24/2018
		      	- updated BSA module to R1.1.0,
		       	  ECASYN module to R4.3-2.1.0,
		       	  SSCAN module to R3.10.2-1.0.0,
		       	  STREAMDEVICE module to R2.7.7-0.2

R1.0.3	    Carolina Bianchini 				- 11/15/2017
		      	- changed VIOC to SIOC and updated PV names in st.cmd to the right unit number

R1.0.2      Carolina Bianchini 				- 11/14/2017
		      	- updated yaml files for EIC
	            - updated dict file to communicate with BPMs

R1.0.1	    Carolina Bianchini 				- 11/08/2017
		      	- updated yaml file for EIC
		      	- moved vioc to sioc and updated st.cmd to handle
				- temperature monitoring from Ethercat and IP address readback.

R1.0.0      Marcio Donadio 					- 03/16/2017
	            - Now using ycpswasy R1.1.branch
	            - RELEASE_SITE was not supposed to be in the repo
	            - st.cmd for vioc-li02-im01
	            - Added README_IOC in iocBoot
	            - Added more 2 IOCs directories for sector 29

R0.1.0      Marcio Donadio 					- 03/15/2017
	            - configure/RELEASE correction

R0.1.0      Marcio Donadio - 03/15/2017
	            - First release of the application
