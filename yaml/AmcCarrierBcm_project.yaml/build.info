tag build-AmcCarrierBcm-0x00000007-20191014134247-leosap
Tagger: Leonid Sapozhnikov <leosap@slac.stanford.edu>
Date:   Mon Oct 14 16:08:07 2019 -0700

PROJECT: AmcCarrierBcm

FW_VERSION: 0x00000007

BUILD_STRING: AmcCarrierBcm: Vivado v2019.1, rdsrv221 (x86_64), Built Mon 14 Oct 2019 01:42:47 PM PDT by leosap

commit 2467af62f829080b0f981325120ddcde2f0c4f57
Author: Leonid Sapozhnikov <leosap@slac.stanford.edu>
Date:   Mon Oct 14 13:42:29 2019 -0700

    Adding 000Top.yaml to apply proper yaml file to adjust thread priority for udp and RSSI

diff --git a/firmware/targets/AmcCarrierBcm/yaml/000TopLevel.yaml b/firmware/targets/AmcCarrierBcm/yaml/000TopLevel.yaml
index d0f9d42..784b5d0 100644
--- a/firmware/targets/AmcCarrierBcm/yaml/000TopLevel.yaml
+++ b/firmware/targets/AmcCarrierBcm/yaml/000TopLevel.yaml
@@ -13,6 +13,19 @@
 #include AppTop.yaml
 #include AmcCarrierDRAM.yaml
 
+# It is important to use the same parameters
+# for shared protocol modules (e.g., all RSSI
+# on the same port is in fact one single, shared
+# module)
+#
+connectionParameters:
+  udpPri:     &udpPri      80
+  udpThreads: &udpThreads   1
+  rssi: &rssiParams
+    retransmissionTimeoutUS: 100000
+    cumulativeAckTimeoutUS:   50000
+    threadPriority:             82
+
 #MMIO range, will be attached to FPGA
 mmio: &mmio
   size: 0x100000000 # 4GB of address space
